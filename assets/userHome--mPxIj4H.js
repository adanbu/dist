import"./modulepreload-polyfill-9p4a8sJU.js";/* empty css              */import"./navigationUserScreen-2NQdNthr.js";document.addEventListener("DOMContentLoaded",function(){const l=localStorage.getItem("token");if(l){const w=JSON.parse(l).value;axios.get("https://partialbackendforweb.onrender.com/pages/userHome",{headers:{Authorization:`Bearer ${w}`}}).then(n=>{console.log("Response received:",n.data);const a=n.data,c=a.name,m=n.data.email;localStorage.setItem("userName",c),localStorage.setItem("userEmail",m);const y=document.getElementById("userNameHam");y.textContent=c;const D=document.getElementById("userEmailHam");D.textContent=m;const E=document.getElementById("welcomeMsgUser");E.textContent=`Welcome ${c},`;const i=new Date,d=i.getMonth()+1,u=i.getFullYear(),f=a.income.reduce((e,t)=>{const o=new Date(t.date);return o.getMonth()+1===d&&o.getFullYear()===u?e+t.amount:e},0),M=document.getElementById("incomeCnt");M.textContent=`$${f}`;const g=a.expenses.reduce((e,t)=>{const o=new Date(t.startDate);return o.getMonth()+1===d&&o.getFullYear()===u?e+t.amount:e},0),$=document.getElementById("expansesCnt");$.textContent=`$${g}`;const h=a.budget.find(e=>{const t=new Date(e.budgetDate);return t.getMonth()+1===d&&t.getFullYear()===u}),C=(h?h.limit:0)-g,v=document.getElementById("budgetCnt");v.textContent=`$${C}`;const p=document.querySelector(".goal-container");p.innerHTML="",n.data.goals.forEach(e=>{const t=document.createElement("div");t.classList.add("shadow","p-2","dark:text-white"),t.innerHTML=`
                        ${e.name}<br>
                        Goal: ${e.amount}<br>
                        Saved: ${e.amountSaved}<br>
                        <div class="w-full bg-gray-50 rounded-full dark:bg-gray-700 shadow">
                            <div class="bg-lime-500 text-xs font-medium text-gray-50 text-center p-0.5 leading-none rounded-full" style="width: ${Math.floor(e.amountSaved/e.amount*100)}%"> ${Math.floor(e.amountSaved/e.amount*100)}%</div>
                        </div>
                    `,p.appendChild(t)});const b=document.getElementById("latestExpensesBody");b.innerHTML="",n.data.expenses.forEach(e=>{const t=document.createElement("tr");t.classList.add("border-b","bg-white","dark:bg-gray-900","dark:border-gray-700"),t.innerHTML=`
                        <td class="whitespace-nowrap px-6 py-4 font-medium">${e.startDate}</td>
                        <td class="whitespace-nowrap px-6 py-4 dark:text-white">${e.payee}</td>
                        <td class="whitespace-nowrap px-6 py-4 dark:text-white">${e.category}</td>
                        <td class="whitespace-nowrap px-6 py-4 dark:text-white">$${e.amount}</td>
                    `,b.appendChild(t)});const r=["Shopping","Food","Transportation","Loan","Groceries","Other"],x=n.data.expenses;console.log(x);const s={};r.forEach(e=>{s[e]=0}),x.forEach(e=>{const t=e.category,o=parseFloat(e.amount),B=new Date(e.startDate).getMonth(),I=new Date().getMonth();B===I&&r.includes(t)&&(s[t]+=o)});const k={type:"doughnut",data:{labels:r,datasets:[{data:r.map(e=>s[e]),backgroundColor:["rgb(133, 105, 241)","rgb(164, 101, 241)","rgb(101, 143, 241)","rgb(200, 100,241)","rgb(11, 81,96)"],hoverOffset:4}]},options:{plugins:{doughnutlabel:{labels:[{text:"Total",font:{size:"20"},color:"#000"}]}}}};console.log(s),new Chart(document.getElementById("chartDoughnut"),k)}).catch(n=>{console.error("Error occurred:",n)})}else console.error("Token not found in localStorage")});
