import"./modulepreload-polyfill-9p4a8sJU.js";/* empty css              */import"./navigationUserScreen-2NQdNthr.js";document.addEventListener("DOMContentLoaded",function(){const d=localStorage.getItem("token");if(d){const g=JSON.parse(d).value;axios.get("https://partialbackendforweb.onrender.com/pages/userHome",{headers:{Authorization:`Bearer ${g}`}}).then(o=>{console.log("Response received:",o.data);const n=o.data.expenses,l=document.querySelector("#latestExpensesBody");l.innerHTML="",n.forEach(t=>{const e=document.createElement("tr");e.classList.add("border-b","bg-white","dark:bg-gray-900","dark:border-gray-700"),e.innerHTML=`
                    <td class="whitespace-nowrap px-6 py-4 font-medium">${new Date(t.startDate).toLocaleDateString()}</td>
                    <td class="whitespace-nowrap px-6 py-4 dark:text-white">${t.payee}</td>
                    <td class="whitespace-nowrap px-6 py-4 dark:text-white">${t.category}</td>
                    <td class="whitespace-nowrap px-6 py-4 dark:text-white">$${t.amount}</td>
                `,l.appendChild(e)});const a=["Shopping","Food","Transportation","Loan","Groceries","Other"],r={};a.forEach(t=>{r[t]=0}),n.forEach(t=>{const e=t.category,h=parseFloat(t.amount),b=new Date(t.startDate).getFullYear(),m=new Date().getFullYear();b===m&&a.includes(e)&&(r[e]+=h)});const i={type:"doughnut",data:{labels:a,datasets:[{data:a.map(t=>r[t]),backgroundColor:["rgb(133, 105, 241)","rgb(164, 101, 241)","rgb(101, 143, 241)","rgb(200, 100,241)","rgb(11, 81,96)"],hoverOffset:4}]},options:{plugins:{doughnutlabel:{labels:[{text:"Total",font:{size:"20"},color:"#000"}]}}}};console.log(r),new Chart(document.getElementById("chartDoughnut"),i);const u=o.data.income,s=Array(12).fill(0);u.forEach(t=>{const e=new Date(t.date).getMonth();s[e]+=t.amount});const c=Array(12).fill(0);n.forEach(t=>{const e=new Date(t.startDate).getMonth();c[e]+=t.amount}),console.log(s),console.log(c);const p=document.getElementById("myChart").getContext("2d");new Chart(p,{type:"bar",data:{labels:["January","February","March","April","May","June","July","August","September","October","November","December"],datasets:[{label:"Income",data:s,backgroundColor:"rgba(75, 192, 192, 0.2)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1},{label:"Expenses",data:c,backgroundColor:"rgba(255, 99, 132, 0.2)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:1}]},options:{indexAxis:"y",plugins:{legend:{position:"right"}},scales:{x:{beginAtZero:!0}}}})}).catch(o=>{console.error("Error fetching data:",o)})}else console.error("Token not found in localStorage")});
